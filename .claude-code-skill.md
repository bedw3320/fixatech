---
name: init-migration
description: Initialize a new ecommerce migration project with complete .claude/ structure, dynamic agent generation based on complexity, automated platform/integration research using Firecrawl and Shopify dev-mcp, and 3-folder repo setup (theme, middleware, business-context). Invoke with /init-migration or "set up new ecommerce migration project". Includes value-based pricing framework and automated middleware generation.
---

# Ecommerce Migration Project Initializer

**Purpose:** Set up a complete, production-ready ecommerce migration project structure with AI agents, domain knowledge, and automated tooling.

**Invoke with:**
- `/init-migration`
- "set up new ecommerce migration project"
- "initialize migration for [merchant name]"

---

## Phase 1: Project Discovery Interview

Ask the user these questions to understand the project:

### Basic Information
1. **Merchant Name:** (will be used as folder name)
2. **Source Platform:**
   - WooCommerce
   - Magento 2
   - BigCommerce
   - Custom/Other

3. **Industry Vertical:** (e.g., Fashion, B2B Manufacturing, Electronics, Grocery)

### Technical Requirements
4. **Integrations Needed:**
   - [ ] ERP (NetSuite, SAP, Dynamics, Other)
   - [ ] PIM (Akeneo, Salsify, InRiver, Other)
   - [ ] OMS (Deposco, Fluent, ShipStation, Other)
   - [ ] Custom APIs
   - [ ] Payment Gateway (non-standard)
   - [ ] 3PL/Fulfillment

5. **Special Features:**
   - [ ] B2B Portal (company accounts, custom pricing, approval workflows)
   - [ ] Headless Commerce (custom frontend)
   - [ ] Multi-channel (POS, marketplaces, mobile app)
   - [ ] Multi-region/Multi-currency
   - [ ] Subscriptions/Recurring payments
   - [ ] Custom checkout flows

6. **Theme Requirements:**
   - [ ] Custom design from Figma/design system
   - [ ] Customize Horizon theme (Shopify's reference theme)
   - [ ] Use existing theme with minor modifications

### Timeline & Scope
7. **Target Go-Live Date:** (if known)
8. **Budget Range:** (optional - for value pricing context)
9. **Development Team:** Internal / Agency / Hybrid

---

## Phase 2: Complexity Scoring

Calculate project complexity based on responses:

```
Score = platform_base + integration_count + feature_flags

Platform Base:
- WooCommerce: +2
- Magento 2: +4
- BigCommerce: +2
- Custom: +5

Integration Count:
- 0 integrations: +0
- 1-2 integrations: +2
- 3+ integrations: +4

Feature Flags:
- B2B Portal: +2
- Headless: +2
- Multi-channel: +1 per additional channel
- Multi-region/currency: +1
- Subscriptions: +1
- Custom checkout: +1
```

**Complexity Tiers:**
- **Simple (0-3):** Basic migration, minimal integrations
- **Moderate (4-6):** 1-2 integrations, some custom features
- **Complex (7-8):** 3+ integrations, B2B or headless
- **Advanced (9-10):** Heavily customized, multiple complex integrations

---

## Phase 3: Dynamic Agent Roster Generation

Based on complexity score, determine which agents to create:

**Always Generated (Tier 1):**
1. `ecommerce-orchestrator.md` (~535 lines)
2. `discovery-lead.md` (~700 lines)
3. `shopify-architect.md` (~850 lines)

**Conditional (Tier 2) - if Complexity â‰¥ 4:**
4. `data-migration-engineer.md` (~700 lines)
5. `integration-specialist.md` (~750 lines)

**Optional (Tier 3) - if Complexity â‰¥ 7:**
6. `theme-developer.md` (~700 lines)
7. `launch-coordinator.md` (~600 lines)

**Total Agents:** 3-7 (stays within 40K token context budget)

---

## Phase 4: Automated Platform Research

Use available MCPs to gather external knowledge:

### 4.1 Source Platform Research (Firecrawl)

**WooCommerce:**
```
firecrawl_scrape("https://woocommerce.com/document/woocommerce-rest-api/")
firecrawl_scrape("https://developer.woocommerce.com/docs/getting-started/")
```
Store results in: `business-context/research/source-platform/woocommerce-api.md`

**Magento 2:**
```
firecrawl_scrape("https://developer.adobe.com/commerce/webapi/rest/quick-reference/")
firecrawl_scrape("https://experienceleague.adobe.com/docs/commerce-admin/")
```
Store results in: `business-context/research/source-platform/magento-api.md`

**BigCommerce:**
```
firecrawl_scrape("https://developer.bigcommerce.com/docs/rest-management")
```
Store results in: `business-context/research/source-platform/bigcommerce-api.md`

### 4.2 Integration Research (Firecrawl)

**For each integration system, scrape API documentation:**

**NetSuite:**
```
firecrawl_scrape("https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/chapter_4201077315.html")
```
Store in: `business-context/research/integrations/netsuite/api-reference.md`

**SAP:**
```
firecrawl_scrape("https://help.sap.com/docs/")
```
Store in: `business-context/research/integrations/sap/api-reference.md`

**For Swagger/OpenAPI specs:**
```
firecrawl_scrape("[client-provided-swagger-url]")
```
Parse and store structured API schema

### 4.3 Shopify Platform Research (dev-mcp)

```
learn_shopify_api(api="admin")
introspect_graphql_schema(conversationId, query="product")
introspect_graphql_schema(conversationId, query="order")
fetch_full_docs(conversationId, paths=["/docs/api/admin-graphql"])
```
Store in: `business-context/research/shopify/admin-api-capabilities.md`

**Attribution Format for All Research:**
```markdown
# [Topic]
**Source:** [URL]
**Retrieved:** 2026-01-27
**Version:** [API version if applicable]
**Scraped with:** Firecrawl / Shopify dev-mcp

[Content]

---
*External research - verify current state before implementation*
```

---

## Phase 5: Generate .claude/ Project Structure

Create complete agent and skill infrastructure in `fixatech/.claude/`:

### 5.1 Create Agents (in `.claude/agents/`)

Generate each agent using templates with:
- MDC format (YAML frontmatter + markdown body)
- ~700 lines each (compressed, high information density)
- Clear routing boundaries ("NOT for X â†’ refer to Y")
- Anti-hallucination enforcement for high-risk queries
- Response format: Always prefix with `[Agent Name]`

**Example Agent Structure:**
```yaml
---
name: shopify-architect
description: Migration strategy design, Shopify platform expertise, integration architecture,
technical feasibility analysis. Triggered by: architecture questions, "how to migrate",
platform capabilities, integration design, app recommendations. NOT for: project quoting
(â†’ use project-estimator skill), middleware code generation (â†’ data-migration-engineer).
---

# Shopify Architect

**Agent Type:** Technical Design & Strategy
**Primary Responsibilities:** ...
[Rest of agent definition following SE-ASSISTANT compression patterns]
```

### 5.2 Create Skills (in `.claude/skills/`)

Generate 6 skill modules:

**1. ecommerce-platforms/**
```
SKILL.md (~400 lines)
references/
â”œâ”€â”€ shopify-capabilities.md
â”œâ”€â”€ woocommerce-patterns.md
â”œâ”€â”€ magento-migration.md
â””â”€â”€ bigcommerce-guide.md
```

**2. migration-methodology/**
```
SKILL.md (~450 lines)
references/
â”œâ”€â”€ discovery-framework.md
â”œâ”€â”€ data-mapping-patterns.md
â”œâ”€â”€ cutover-strategies.md
â””â”€â”€ rollback-procedures.md
```

**3. integration-patterns/**
```
SKILL.md (~400 lines)
references/
â”œâ”€â”€ netsuite-integration.md
â”œâ”€â”€ sap-integration.md
â””â”€â”€ custom-api-patterns.md
```

**4. project-estimator/** ğŸ†•
```
SKILL.md (~450 lines)
references/
â”œâ”€â”€ value-pricing-framework.md
â”œâ”€â”€ feature-pricing-matrix.md
â”œâ”€â”€ complexity-multipliers.md
â””â”€â”€ quote-templates.md
```

**5. middleware-builder/** ğŸ†•
```
SKILL.md (~500 lines)
scripts/
â”œâ”€â”€ generate-middleware.py
â””â”€â”€ deploy-middleware.py
references/
â”œâ”€â”€ api-crawling-patterns.md
â”œâ”€â”€ field-mapping-templates.md
â”œâ”€â”€ hosting-options.md
â””â”€â”€ middleware-architectures.md
```

**6. data-validation/**
```
SKILL.md (~400 lines)
scripts/
â”œâ”€â”€ validate-products.py
â”œâ”€â”€ validate-orders.py
â””â”€â”€ validate-customers.py
references/
â””â”€â”€ test-matrix.md
```

### 5.3 Create Config (in `.claude/config/`)

**settings.local.json:**
```json
{
  "permissions": {
    "allow": [
      "Bash(git:*)",
      "Bash(npm:*)",
      "Bash(node:*)",
      "Bash(python:*)",
      "mcp__firecrawl__firecrawl_scrape",
      "mcp__firecrawl__firecrawl_crawl",
      "mcp__shopify-dev-mcp__*",
      "mcp__n8n-mcp__*"
    ]
  }
}
```

---

## Phase 6: Initialize 3-Folder Repo Structure

Create merchant project folder with theme, middleware, and business-context subfolders:

```
{merchant-name}/
â”œâ”€â”€ theme/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ sections/
â”‚   â”œâ”€â”€ snippets/
â”‚   â”œâ”€â”€ templates/
â”‚   â””â”€â”€ docs/
â”‚       â””â”€â”€ customization-guide.md
â”‚
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ package.json (or requirements.txt for Python)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ transformers/
â”‚   â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ tests/
â”‚   â””â”€â”€ docs/
â”‚       â””â”€â”€ architecture.md
â”‚
â””â”€â”€ business-context/
    â”œâ”€â”€ README.md
    â”œâ”€â”€ project-brief.md (auto-generated from interview)
    â”œâ”€â”€ requirements/
    â”‚   â”œâ”€â”€ discovery-notes.md
    â”‚   â”œâ”€â”€ technical-requirements.md
    â”‚   â””â”€â”€ business-requirements.md
    â”œâ”€â”€ architecture/
    â”‚   â”œâ”€â”€ migration-strategy.md
    â”‚   â”œâ”€â”€ integration-architecture.md
    â”‚   â””â”€â”€ data-model-mapping.md
    â”œâ”€â”€ timelines/
    â”‚   â””â”€â”€ project-plan.md
    â””â”€â”€ research/ (auto-populated from Phase 4)
        â”œâ”€â”€ source-platform/
        â”œâ”€â”€ integrations/
        â”œâ”€â”€ shopify/
        â””â”€â”€ industry/
```

### 6.1 Auto-Generate project-brief.md

Populate from interview responses:

```markdown
# {Merchant Name} - Ecommerce Migration Project

**Source Platform:** {platform}
**Target Platform:** Shopify Plus
**Industry:** {vertical}
**Go-Live Target:** {date}

## Executive Summary
Migration from {source} to Shopify with {integration count} integrations and {features}.

## Technical Scope
- **Integrations:** {list}
- **Special Features:** {list}
- **Theme Requirements:** {requirements}

## Complexity Assessment
- **Score:** {score}/10
- **Tier:** {tier}
- **Agent Roster:** {X} agents deployed

## Timeline Overview
See: [timelines/project-plan.md](timelines/project-plan.md)

## Architecture Overview
See: [architecture/migration-strategy.md](architecture/migration-strategy.md)
```

---

## Phase 7: Output Summary

Present to user:

```
âœ… Ecommerce Migration Project Initialized

ğŸ“ Project: {merchant-name}/
   â”œâ”€â”€ theme/          (Shopify theme development)
   â”œâ”€â”€ middleware/     (Integration layer)
   â””â”€â”€ business-context/ (Requirements & planning)

ğŸ¤– Agents Created: {X} agents
   â€¢ ecommerce-orchestrator
   â€¢ discovery-lead
   â€¢ shopify-architect
   {... conditional agents based on complexity}

ğŸ“š Skills Loaded: 6 modules
   â€¢ ecommerce-platforms
   â€¢ migration-methodology
   â€¢ integration-patterns
   â€¢ project-estimator (VALUE PRICING)
   â€¢ middleware-builder (AUTO-GENERATE CODE)
   â€¢ data-validation

ğŸ”¬ Research Completed:
   âœ… {Source platform} API documentation
   âœ… {N} integration system docs
   âœ… Shopify Admin API capabilities
   âœ… Industry patterns for {vertical}

ğŸ“Š Complexity Score: {score}/10 ({tier})

ğŸ’¡ Next Steps:
1. Review business-context/project-brief.md
2. Run discovery with: "Start discovery for {merchant}"
3. Get value-based quote with: "Estimate project cost"
4. Generate middleware with: "Build {integration} sync"

ğŸš€ Ready to begin migration planning!
```

---

## Key Implementation Notes

### Anti-Hallucination Enforcement

All agents must enforce these rules for high-risk queries:

**Pricing/Payment Data:**
- MUST cross-validate 2+ sources
- MUST quote exact text
- NEVER synthesize payment processor fees
- Flag all pricing as "verify with current provider rates"

**Timelines:**
- ALWAYS add 30% buffer to estimates
- Document all assumptions
- Flag dependencies explicitly
- State "I don't know" when uncertain

**Data Loss Risk:**
- Explicitly flag HIGH/MEDIUM/LOW severity
- List fields that won't migrate
- Provide workarounds with tradeoffs

**Security/Compliance:**
- Never invent security requirements
- Reference official compliance docs
- Cross-validate with 2+ authoritative sources

### Value-Based Pricing Philosophy

When project-estimator skill is invoked:
- Price on **client value**, not hours spent
- Account for **AI-accelerated efficiency**
- Example: Feature worth $15k to client, built in 5 hours â†’ Bill $15k
- Provide market rate ranges + complexity multipliers
- Justify pricing with ROI/value statements

### Middleware Auto-Generation

When middleware-builder skill is invoked:
- Crawl BOTH system APIs (Firecrawl + dev-mcp)
- Generate field mapping specification
- Build actual code (Node.js/Python)
- Recommend hosting (Vercel, Railway, AWS Lambda, etc.)
- Provide deployment guide + env variables

---

## Error Handling

If any phase fails:
1. **Interview incomplete:** Re-prompt for missing answers
2. **API crawl fails:** Use cached knowledge + flag "verify current docs"
3. **Complexity score unclear:** Default to "Moderate" tier
4. **Agent generation errors:** Skip optional agents, ensure core 3 exist
5. **Research timeout:** Proceed with partial results, flag gaps

Always complete initialization - partial setup is better than failure.

---

**End of Master Prompt Skill**
